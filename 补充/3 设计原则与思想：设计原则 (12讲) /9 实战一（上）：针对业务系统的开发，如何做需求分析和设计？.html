
    对于一个工程师来说，如果要追求长远发展，你就不能一直只把自己放在执行者的角色，不能只是一个代码实现者，你还要有独立负责一个系统的能力，能端到端
（end to end）开发一个完整的系统。这其中的工作就包括：前期的需求沟通分析、中期的代码设计实现、后期的系统上线维护等。

    前面我们还提到过，大部分工程师都是做业务开发的。很多工程师都觉得，做业务开发没啥技术含量，没有成长，就是简单的 CRUD，翻译业务逻辑，根本用不上
专栏中讲的设计原则、思想、模式。

    所以，针对这两个普遍的现象，今天，我通过一个积分兑换系统的开发实战，一方面给你展示一个业务系统从需求分析到上线维护的整个开发套路，让你能举一反三
地应用到所有其他系统的开发中，另一方面也给你展示在看似没有技术含量的业务开发中，实际上都蕴含了哪些设计原则、思想、模式。

    话不多说，让我们正式开始今天的学习吧！




1 需求分析

    积分是一种常见的营销手段，很多产品都会通过它来促进消费、增加用户粘性，比如淘宝积分、信用卡积分、商场消费积分等等。假设你是一家类似淘宝这样的电商
平台的工程师，平台暂时还没有积分系统。Leader 希望由你来负责开发这样一个系统，你会如何来做呢？

    你可能会说，只要产品经理给我产品设计文档（PRD）、线框图，我照着实现就可以了。我觉得，这种想法有点狭隘。我认为，技术人员应该更多地参与到产品设计
中。在 Google 工作的时候，我很明显能感受到，Google 工程师跟其他公司工程师有一个很大区别，那就是大部分人都具备产品思维，并不是完全的“技术控”。所以，
Google 很多产品的初期设计都是工程师来完成的，在产品发展壮大到一定程度的时候，才会引入产品经理的角色。

    那你可能要问了，作为技术人，我该怎么做产品设计呢？首先，一定不要自己一个人闷头想。一方面，这样做很难想全面。另一方面，从零开始设计也比较浪费时间。
所以，我们要学会“借鉴”。爱因斯坦说过，“创造的一大秘诀是要懂得如何隐藏你的来源”。你看大师都含蓄地表达了“借鉴”的重要性，我们也没有必要因为“借鉴”而感到
不好意思了。

    我们可以找几个类似的产品，比如淘宝，看看它们是如何设计积分系统的，然后借鉴到我们的产品中。你可以自己亲自用用淘宝，看看积分是怎么使用的，也可以直
接百度一下“淘宝积分规则”。基于这两个输入，我们基本上就大致能摸清楚积分系统该如何设计了。除此之外，我们还要充分了解自己公司的产品，将借鉴来的东西糅合在
我们自己的产品中，并做适当的微创新。

    笼统地来讲，积分系统无外乎就两个大的功能点，一个是赚取积分，另一个是消费积分。赚取积分功能包括积分赚取渠道，比如下订单、每日签到、评论等；还包括
积分兑换规则，比如订单金额与积分的兑换比例，每日签到赠送多少积分等。消费积分功能包括积分消费渠道，比如抵扣订单金额、兑换优惠券、积分换购、参与活动扣
积分等；还包括积分兑换规则，比如多少积分可以换算成抵扣订单的多少金额，一张优惠券需要多少积分来兑换等等。

    我刚刚给出的只是非常笼统、粗糙的功能需求。在实际情况中，肯定还有一些业务细节需要考虑，比如积分的有效期问题。对于这些业务细节，还是那句话，闷头拍
脑袋想是想不全面的。以防遗漏，我们还是要有方法可寻。那除了刚刚讲的“借鉴”的思路之外，我还喜欢通过产品的线框图、用户用例（user case ）或者叫用户故事
（user story）来细化业务流程，挖掘一些比较细节的、不容易想到的功能点。

    线框图对你来说应该不陌生，我就不赘述了，我这里重点说一下用户用例。用户用例有点儿类似我们后面要讲的单元测试用例。它侧重情景化，其实就是模拟用户如
何使用我们的产品，描述用户在一个特定的应用场景里的一个完整的业务操作流程。所以，它包含更多的细节，且更加容易被人理解。比如，有关积分有效期的用户用例，
我们可以进行如下的设计：

    用户在获取积分的时候，会告知积分的有效期；
    用户在使用积分的时候，会优先使用快过期的积分；
    用户在查询积分明细的时候，会显示积分的有效期和状态（是否过期）；
    用户在查询总可用积分的时候，会排除掉过期的积分。

    通过上面讲的方法，我们就可以将功能需求大致弄清楚了。积分系统的需求实际上并不复杂，我总结罗列了一下，如下所示。

    1. 积分赚取和兑换规则

    积分的赚取渠道包括：下订单、每日签到、评论等。

    积分兑换规则可以是比较通用的。比如，签到送 10 积分。再比如，按照订单总金额的 10% 兑换成积分，也就是 100 块钱的订单可以积累 10 积分。除此之外，
积分兑换规则也可以是比较细化的。比如，不同的店铺、不同的商品，可以设置不同的积分兑换比例。

    对于积分的有效期，我们可以根据不同渠道，设置不同的有效期。积分到期之后会作废；在消费积分的时候，优先使用快到期的积分。

    2. 积分消费和兑换规则

    积分的消费渠道包括：抵扣订单金额、兑换优惠券、积分换购、参与活动扣积分等。

    我们可以根据不同的消费渠道，设置不同的积分兑换规则。比如，积分换算成消费抵扣金额的比例是 10%，也就是 10 积分可以抵扣 1 块钱；
100 积分可以兑换 15 块钱的优惠券等。

    3. 积分及其明细查询查询用户的总积分，以及赚取积分和消费积分的历史记录。

    刚刚讲了模块的功能划分，模块之间的交互的设计，现在，我们再来看，模块本身如何来设计。实际上，业务系统本身的设计无外乎有这样三方面的工作要做：接口
设计、数据库设计和业务模型设计。这部分的具体内容我们放到下一下节课中跟实现一块进行讲解。




重点回顾
    今天的内容到此就讲完了。我们来一块总结回顾一下，你需要掌握的重点内容。

    技术人也要有一些产品思维。对于产品设计、需求分析，我们要学会“借鉴”，一定不要自己闷头想。一方面这样做很难想全面，另一方面从零开始设计也比较浪费时
间。除此之外，我们还可以通过线框图和用户用例来细化业务流程，挖掘一些比较细节的、不容易想到的功能点。

    面向对象设计聚焦在代码层面（主要是针对类），那系统设计就是聚焦在架构层面（主要是针对模块），两者有很多相似之处。很多设计原则和思想不仅仅可以应用
到代码设计中，还能用到架构设计中。实际上，我们可以借鉴面向对象设计的步骤，来做系统设计。

    面向对象设计的本质就是把合适的代码放到合适的类中。合理地划分代码可以实现代码的高内聚、低耦合，类与类之间的交互简单清晰，代码整体结构一目了然。类
比面向对象设计，系统设计实际上就是将合适的功能放到合适的模块中。合理地划分模块也可以做到模块层面的高内聚、低耦合，架构整洁清晰。在面向对象设计中，类设
计好之后，我们需要设计类之间的交互关系。类比到系统设计，系统职责划分好之后，接下来就是设计系统之间的交互了。





课堂讨论
    对公司业务及已有系统的熟悉程度，有时候甚至会超过个人的技术能力，更能决定一个人在公司内部的发展前途。但是，当我们出去面试的时候，面试官大部分情况
下更加关注你的技术能力，而非特定的业务细节，特别是你做的业务并不是太复杂，或者跟要面试岗位无关的时候。

    这两者听起来比较矛盾。作为一名技术人，为了谋求更好的发展，你觉得是应该多花点时间研究业务呢，还是要多花点心思在技术上呢？

    欢迎在留言区写下你的答案，和同学一起交流和分享。如果有收获，也欢迎你把这篇文章分享给你的朋友。





留言：

    沉淀的梦想
    个人觉得，如果对当前工作不满意，想要找更好的工作的话，应该多花点时间在技术上，但是如果对当前工作很满意，想要继续在当前岗位上发展的话，还是应该多花时间在业务上
    2019-12-25

    alex
    如果不在大厂的话业务还是很重要的。无论什么技术都是为了解决业务而诞生的。
    2020-02-02


    一粟
    如果对公司满意，则也应该花点时间在沟通上
    如果对公司不满意，但是对行业满意，技术和业务上还是都要花时间的，但是沟通可能就没有必要花太多时间了
    如果都不满意，则要反思自己当时为啥做这样的选择，不二错
    2019-12-28


    未来小娃
    聊聊技术与业务
    最近看了一些关于程序员价值方面的文章，很多人包括我自己有个疑问，面试时只看技术，进公司后做业务，两者矛盾么？这个问题的本质是哪个更有价值。如果你
不喜欢做业务那就往中间件方向发展，做出类似高性能高可用的中间件不失为值得骄傲的事情。那么业务呢，要清楚的是公司的现金流都是来源于业务，业务产生价值。那
么两者的关系是公司依赖业务，业务开发需要技术，也就是技术是更底层更通用的能力，所以自然也就更好评价，业务各不相同复杂度和场景天差地别不可复用，自然就没
有比较好的评价标准。技术能力的高低决定了业务质量，而业务质量的高低反过来影响你的技术，业务复杂度上升了，之前的技术可能就不满足了，这也是技术不断更新的
源动力，无法适应业务的技术是没有价值的，那么到底是什么造成了程序员价值的高低呢？我认为有以下几点：

    第一，专业能力。虽然技术不断更新，但是底层的基础技术却没变，我们应该花更多时间掌握好底层技术，不变应万变。基本功扎实了才能走得更远。
    第二，落地能力。有了基本功后我们就具备完成一件开发任务的能力，但是怎么把事情做好却是需要不断提升的，结果导向，积极主动，有想法能落地才能体现你的
价值。记住，当你开始积极主动思考一些事情后，你已经领先了大部分人。
    第三，终身学习能力。公司要持续发展，业务就会不断迭代发展，要让自己的技术能够匹配上业务的发展就需要不断学习，扎扎实实在自己想要专研的领域做精，你
的价值也就体现出来了。
    总结下：技术是业务的支撑，业务反过来影响技术，业务发展就需要提升技术。
    作者回复: 👍
    2020-04-20


    李小四
    设计模式_23
    这个问题太有感触了，不熟悉业务当然做不好系统，但业务理解的深度与技术能力并没有直接的对应关系。
    我们先讨论一下另外一个问题：
        技术人员创造的价值是什么呢？我们的技术最终体现某一个商业的业务上，解决用户的问题，从而创造价值。我们去面试，去找新的工作机会，目的是更好地
    实现自己的价值，目的并不只是换个涨点工资的工作。比如王争老师，现在也是在教育的这个具体的业务上闪闪发光。

    这里引用一下吴军老师的“五级工程师模型”

    > 第五级：能独立解决问题，完成工程工作；
    > 第四级：能指导和带领其他人一同完成更有影响力的工作；
    > 第三级：能独立设计和实现产品，并且在市场上获得成功；
    > 第二级：能设计和实现别人不能做出的产品，也就是说他的作用很难取代；
    > 第一级：开创一个产业

    可以看到，在更高级别的工程师中，对于产品和商业的理解变成了一种要求，因为他是技术与现实生活的桥梁。
    2019-12-25


    黄林晴
    首先我非常赞成，技术人也要有产品的思维，但是悲催的是，对我这种喜欢和产品经理讨论需求的技术人其实说多了怕是觉得找借口……
    课堂讨论:
    一般面试的时候都是注重技术，但是进去公司后都是以业务为核心，我一直觉得程序猿甚至公司的竞争核心不止于技术上，如果你看好公司前途想脚踏实地干一番，
 那么久好好熟悉公司业务系统，如果觉得想找更好的出路就多学技术争取很好的出路✔
    2019-12-25


 Jxin
    课后讨论
    1.业务是专业资源（复用受限），技术是通用资源（复用不受限），所以业务知识的沉淀对于个人是一个风险比较高的投资，所以大部分人本能的就会讨厌这种受制
    的局势，进而就不喜欢在业务上投入太多的精力。

    2.其实我觉得很遗憾，大部分程序员会规划自己的技术栈却不关心干什么活（做什么业务）。当然，业务知识不好考核，技术知识好考核，所以技术知识在面试吃香
    也是必然。不过可以遇见的情景是：招了个技术牛逼的人，但短时间他产生不了什么价值（需要了解业务），等到他吃透业务（半年甚至一年），他的技术水平已经
    又上了一个台阶，面临新一轮人员调动的开始。结果就是，一个技术很牛逼的人，在我这个项目组干活期间，不显山不露水，资深的水平干着高级的事，我还知道这
    合情合理，等他开始发挥资深水平价值时，人走了。

    3.产品技术其实是一体两面，如果有产品思维，那么业务领域的选择和技术栈的选择其实是绑在一起的。走在自己想干的业务领域，自己的技术栈也跟着这个领域的
    需求去发展，如此以来每份工作的业务积累都能为下份公司带来大量点子和突破口。但这样就会出现，高级的水平干架构师的事，但一般没公司为你带来的“架构师级
    价值”买单。目前的情况是欢喜的接受你带来的改变，但并不会为你加薪（因为你的技术水平在市场只值这么多，公司给你的钱会尽量平衡在市场线，而非你真正的价
    值）。这种病态得不到改善，程序员不重视业务就得不到变革。所幸当下，跑马圈地已过，抢人已经不再疯狂，招聘方的招聘目标也在慢慢从技术牛逼到实际价值转
    变。
    2019-12-25
    评论 1

    一粟
    认同前半部分, 不认同后半部分, 否则咋有"面试造火箭, 入职...",
    还有面试招个大牛过来就想让他全包干O(∩_∩)O~
    大牛固然"狡猾", 企业也很贪婪
    2020-04-07



    守拙
    课堂讨论Answer：

    钻研业务与发展技术的取舍（或精力分配）取决于其风险与收益。

    如果公司基本面良好，业务蒸蒸日上，我个人受到领导的认可，同事的尊敬，则倾向于将更多的精力钻研业务，提升个人在公司的不可替代性。

    如果公司基本面恶化或前途未卜（比如大多创业型公司），领导本领低微或不重视我的意见，和同事相处一般，则应将大量精力分配在技术精研上，提升个人在就业
    市场上的竞争力。

    最后，钻研业务和提升技术并不是一枚硬币的两面，如果一些事情上同时满足两种需求，就再好不过。
    2019-12-26



    BerryMew
    我以前是技术控，完全不关心业务，也不觉得业务比技术重要。但随着工作时间越来越长，特别是在一个行业做的越来越久，越发能够感受到，业务是你在行业中有更好发展的必备条件。
    2019-12-25


    大饶Raysir
    技术是基础，也是程序员市场的硬通货，这条路走下去可以选择架构师、技术总监；业务能在公司或团队内持续发展、转型产品项目经理、晋升团队leader，也是
    一条康庄大道，看性格咯~
    2019-12-25


    易燃🔥
    如果背景是作为一个技术人，那个人觉得做一个“业务驱动的领域技术专家”会是一个比酷的定位，具体来描述的话，研究业务时间不低于20%，研究技术时间不低于
    60%。可以理解前面的比例为象征意义：20%是指——如果花10%的时间可以达到用户对业务的了解程度，那作为技术人，你起码要花费20%的时间理解业务和领域相关
    的业务知识；60%是指——如果50%代表“仅仅大于一半”，那么我们对技术方面花的心思要比“仅仅大于一半”多。引用老师之前的例子“放盐少许”，自己“品味”哈哈。
    2020-02-25


    南山
    个人更倾向于技术，但是并不表示不需要花心思在业务上，技术就是用来解决业务需求的，业务的复杂度也能反过来推动个人技术的成长，再总结，提炼出自己的套
    路，也就是经常挂在嘴边的常用架构设计方案。
    做得多，技术储备丰富，应对新的业务也就更有思路和合理的技术方案
    2019-12-25
    评论 2

    南山
    哈哈哈，你这情况跟我前段时间的处境特别相似。
    你可以这样想试试: 产品也是人，也不可能全对的，甚至有些时候需求都是天马行空或者不切实际。你师兄负责一个产品的开发时间长，有可能比产品还要了解他们
    想要什么，再结合现有的技术架构和后续的技术架构演进去怼产品的无厘头需求是不是就觉着合理点了？
    其实产品研发目标是一致的，就是提升产品核心竞争力，创造价值，但是技术要多从技术角度多思考系统演进过程中复杂度越来越高的情况下还能保证需求的响应速
    度和系统的稳定性，产品从他对产品的理解来把控产品的演进方向，也要考虑技术实现成本，两者相辅相成的
    个人见解哈
    2019-12-29

    daniel李
    嗯，我也是倾向于技术。在电信公司当过business analyst，被灌输的概念是IT是为业务服务的，产品需求应尽可能满足，你搞不定或者jjyy那就让外包ibm或
    accenture来搞，毕竟产品需求都是人家和各业务部门和管理层开大会敲定的，没什么能挑战的余地，唯一能用的理由是”太复杂了，程序员技术不行，可以简化吗？”
    后来转行到初创公司做后端开发，对于程序员需要参与产品需求讨论甚至挑战需求的合理性这种文化有点不适应。
    我个人的观念是各司其职，并且相信大家都很专业，产品经理提出需求我认为他是经过深思熟虑的，我的责任是要通过技术把它实现，不该让技术限制业务。
    结果就经常撞板，开会同意了产品需求，然后师兄评审技术方案时说产品需求不合理或不符合公司业务模型，然后就和产品撕逼要求推翻需求，自己被夹在中间，唉
    2019-12-25


    dxy_123456
    在一家国企工作，领导是个注重员工培养的人，每天都会花半个小时学习UX、产品经理相关的课程。期初都是不感兴趣的，觉得和自己无关，但今天在老师的讲课中
    看到一些UX相关的知识，还是非常惊喜。我觉得多学习会发现很多相关领域的知识都是可以串起来的，技术人员当然重点还是多钻研技术，但既然在公司也做业务相
    关的工作，为何不再花一点时间把它做得更好呢。
    作者回复: 嗯嗯 ������
    2020-11-25










